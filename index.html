<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mr. B's Classroom Escape</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            color: white;
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            color: #ffd700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            margin-bottom: 20px;
            font-size: 2.5em;
        }

        .story {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            border-left: 5px solid #ffd700;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .puzzle-container {
            display: none;
            background: rgba(255, 255, 255, 0.1);
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 2px solid #4a90e2;
        }

        .puzzle-container.active {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .puzzle-title {
            color: #ffd700;
            font-size: 1.4em;
            margin-bottom: 15px;
            font-weight: bold;
        }

        input, textarea, select {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 5px;
            margin: 10px 0;
            font-size: 1em;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
        }

        button {
            background: linear-gradient(45deg, #4a90e2, #357abd);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            margin: 10px 5px;
            transition: all 0.3s ease;
        }

        button:hover {
            background: linear-gradient(45deg, #357abd, #2968a3);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .hint-btn {
            background: linear-gradient(45deg, #f39c12, #e67e22);
        }

        .hint-btn:hover {
            background: linear-gradient(45deg, #e67e22, #d35400);
        }

        .hint {
            display: none;
            background: rgba(243, 156, 18, 0.2);
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
            border-left: 4px solid #f39c12;
        }

        .success {
            background: rgba(39, 174, 96, 0.3);
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 4px solid #27ae60;
            display: none;
        }

        .error {
            background: rgba(231, 76, 60, 0.3);
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 4px solid #e74c3c;
            display: none;
        }

        .progress {
            background: rgba(255, 255, 255, 0.2);
            height: 20px;
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-bar {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .team-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }

        .celebration {
            display: none;
            text-align: center;
            padding: 30px;
            background: linear-gradient(45deg, #f39c12, #e67e22);
            border-radius: 15px;
            margin: 20px 0;
        }

        .celebration h2 {
            font-size: 2.5em;
            margin-bottom: 20px;
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .timer {
            font-size: 1.2em;
            color: #ffd700;
            text-align: center;
            margin: 10px 0;
            font-weight: bold;
        }

        .riddle-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }

        .riddle-option {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            border: 2px solid transparent;
        }

        .riddle-option:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: #4a90e2;
        }

        .riddle-option.selected {
            background: rgba(74, 144, 226, 0.3);
            border-color: #4a90e2;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîê Mr. B's Classroom Escape üîê</h1>
        
        <div class="story">
            <strong>The Scenario:</strong> Your group has been chosen for a special after-school activity, but when you arrive at Mr. B's mysterious Room 1610, the door locks behind you! A note appears on the smart board: "Welcome, brave students! To escape my classroom, you must work together to solve five challenges. Each challenge will test not only your minds but also help you discover amazing things about your teammates. Only by combining your unique strengths and sharing your stories can you find the key to freedom!" 
            <br><br><em>Note: This escape room works for teams of 3 or 4 members. Simply leave the extra fields blank if you have a team of 3!</em>
        </div>

        <div class="progress">
            <div class="progress-bar" id="progressBar"></div>
        </div>

        <div class="timer" id="timer">Time Elapsed: 00:00</div>

        <!-- Challenge 1: Team Introductions -->
        <div class="puzzle-container active" id="puzzle1">
            <div class="puzzle-title">üé≠ Challenge 1: The Name Game Cipher</div>
            <p>The first clue reads: "Before you can escape, I must know who you are. Enter your class period and each team member's name and their favorite subject in school. When all information is entered, the cipher will reveal your next challenge!"</p>
            <p><em>Teams of 3: Leave the 4th member fields blank. Teams of 4: Fill out all fields!</em></p>
            
            <div style="margin-bottom: 20px;">
                <label style="color: #ffd700; font-weight: bold; display: block; margin-bottom: 5px;">Which class period are you in?</label>
                <select id="period" style="width: 200px;">
                    <option value="">Select Period</option>
                    <option value="1">Period 1</option>
                    <option value="2">Period 2</option>
                    <option value="4">Period 4</option>
                    <option value="5">Period 5</option>
                </select>
            </div>
            
            <div class="team-info">
                <input type="text" id="name1" placeholder="Team Member 1 Name">
                <select id="subject1">
                    <option value="">Choose Favorite Subject</option>
                    <option value="math">Math</option>
                    <option value="science">Science</option>
                    <option value="english">English</option>
                    <option value="history">History</option>
                    <option value="art">Art</option>
                    <option value="music">Music</option>
                    <option value="pe">Physical Education</option>
                    <option value="other">Other</option>
                </select>
                
                <input type="text" id="name2" placeholder="Team Member 2 Name">
                <select id="subject2">
                    <option value="">Choose Favorite Subject</option>
                    <option value="math">Math</option>
                    <option value="science">Science</option>
                    <option value="english">English</option>
                    <option value="history">History</option>
                    <option value="art">Art</option>
                    <option value="music">Music</option>
                    <option value="pe">Physical Education</option>
                    <option value="other">Other</option>
                </select>
                
                <input type="text" id="name3" placeholder="Team Member 3 Name">
                <select id="subject3">
                    <option value="">Choose Favorite Subject</option>
                    <option value="math">Math</option>
                    <option value="science">Science</option>
                    <option value="english">English</option>
                    <option value="history">History</option>
                    <option value="art">Art</option>
                    <option value="music">Music</option>
                    <option value="pe">Physical Education</option>
                    <option value="other">Other</option>
                </select>
                
                <input type="text" id="name4" placeholder="Team Member 4 Name (optional for teams of 3)">
                <select id="subject4">
                    <option value="">Choose Favorite Subject (optional for teams of 3)</option>
                    <option value="math">Math</option>
                    <option value="science">Science</option>
                    <option value="english">English</option>
                    <option value="history">History</option>
                    <option value="art">Art</option>
                    <option value="music">Music</option>
                    <option value="pe">Physical Education</option>
                    <option value="other">Other</option>
                </select>
            </div>
            
            <button onclick="checkChallenge1()">Submit Team Info</button>
            <button class="hint-btn" onclick="toggleHint('hint1')">Need a Hint?</button>
            
            <div class="hint" id="hint1">
                üí° Make sure everyone's name is spelled correctly and each person picks their favorite subject. The cipher needs complete information!
            </div>
            
            <div class="success" id="success1"></div>
            <div class="error" id="error1"></div>
        </div>

        <!-- Challenge 2: Logic Puzzle -->
        <div class="puzzle-container" id="puzzle2">
            <div class="puzzle-title">üß© Challenge 2: The Locker Combination</div>
            <p>Great job! Now you've discovered an old school locker with a note: "This locker contains your next clue, but first solve this riddle together. Discuss each option as a team before choosing!"</p>
            
            <p><strong>Riddle:</strong> "I have keys but no locks. I have space but no room. You can enter, but you can't go outside. What am I?"</p>
            
            <div class="riddle-options">
                <div class="riddle-option" onclick="selectOption(this, 'piano')">üéπ Piano</div>
                <div class="riddle-option" onclick="selectOption(this, 'computer')">üíª Computer</div>
                <div class="riddle-option" onclick="selectOption(this, 'keyboard')">‚å®Ô∏è Keyboard</div>
                <div class="riddle-option" onclick="selectOption(this, 'typewriter')">üìù Typewriter</div>
            </div>
            
            <button onclick="checkChallenge2()" id="submitRiddle">Submit Answer</button>
            <button class="hint-btn" onclick="toggleHint('hint2')">Need a Hint?</button>
            
            <div class="hint" id="hint2">
                üí° Think about things you use every day in school that have "keys" and "space" but in a different way than you might first imagine!
            </div>
            
            <div class="success" id="success2"></div>
            <div class="error" id="error2"></div>
        </div>

        <!-- Challenge 3: Team Dreams -->
        <div class="puzzle-container" id="puzzle3">
            <div class="puzzle-title">‚ú® Challenge 3: The Dream Decoder</div>
            <p>Excellent! The locker opens to reveal a magical dream catcher with a message: "To proceed, each team member must share one dream or goal they have for this school year. When all dreams are shared, the path forward will be revealed!"</p>
            
            <div class="team-info">
                <textarea id="dream1" placeholder="Team Member 1: What's one goal or dream you have for this school year?" rows="3"></textarea>
                <textarea id="dream2" placeholder="Team Member 2: What's one goal or dream you have for this school year?" rows="3"></textarea>
                <textarea id="dream3" placeholder="Team Member 3: What's one goal or dream you have for this school year?" rows="3"></textarea>
                <textarea id="dream4" placeholder="Team Member 4: What's one goal or dream you have for this school year? (Leave blank for teams of 3)" rows="3"></textarea>
            </div>
            
            <button onclick="checkChallenge3()">Share Our Dreams</button>
            <button class="hint-btn" onclick="toggleHint('hint3')">Need a Hint?</button>
            
            <div class="hint" id="hint3">
                üí° Dreams can be about academics, friendships, activities, sports, clubs, or personal growth. Be honest and encouraging with each other!
            </div>
            
            <div class="success" id="success3"></div>
            <div class="error" id="error3"></div>
        </div>

        <!-- Challenge 4: Math Collaboration -->
        <div class="puzzle-container" id="puzzle4">
            <div class="puzzle-title">üî¢ Challenge 4: The Number Vault</div>
            <p>Amazing! Your shared dreams have unlocked a number vault! But there's a catch - you need to work together to solve this step-by-step:</p>
            
            <p><strong>Step 1:</strong> Add up the total number of letters in all your team members' first names.</p>
            <input type="number" id="nameLetters" placeholder="Total letters in all names">
            
            <p><strong>Step 2:</strong> Multiply that number by the number of different favorite subjects your team chose in Challenge 1.</p>
            <input type="number" id="subjectMultiple" placeholder="Result after multiplying">
            
            <p><strong>Step 3:</strong> Add 13 (for 8th grade + 5 challenges) to get your final code!</p>
            <input type="number" id="finalCode" placeholder="Final vault code">
            
            <button onclick="checkChallenge4()">Open the Vault</button>
            <button class="hint-btn" onclick="toggleHint('hint4')">Need a Hint?</button>
            
            <div class="hint" id="hint4">
                üí° Work through this together! Count each letter carefully, figure out how many unique subjects were chosen, then do the math step by step.
            </div>
            
            <div class="success" id="success4"></div>
            <div class="error" id="error4"></div>
        </div>

        <!-- Challenge 5: Final Team Challenge -->
        <div class="puzzle-container" id="puzzle5">
            <div class="puzzle-title">üèÜ Final Challenge: The Team Motto</div>
            <p>Incredible! You're so close to escaping! For your final challenge, you must work together to create a team motto or cheer that includes:</p>
            <ul>
                <li>‚úÖ All team members' names</li>
                <li>‚úÖ At least one subject someone mentioned as their favorite</li>
                <li>‚úÖ One shared goal or theme from your dreams</li>
                <li>‚úÖ The word "together"</li>
            </ul>
            
            <textarea id="teamMotto" placeholder="Write your amazing team motto here!" rows="4"></textarea>
            
            <button onclick="checkChallenge5()">Escape the Room!</button>
            <button class="hint-btn" onclick="toggleHint('hint5')">Need a Hint?</button>
            
            <div class="hint" id="hint5">
                üí° Make it fun and positive! It could be a chant, a poem, or just a creative statement. The important thing is that it represents your whole team!
            </div>
            
            <div class="success" id="success5"></div>
            <div class="error" id="error5"></div>
        </div>

        <!-- Victory Screen -->
        <div class="celebration" id="celebration">
            <h2>üéâ CONGRATULATIONS! üéâ</h2>
            <p><strong>You've successfully escaped the Mystery Classroom!</strong></p>
            <p>More importantly, you've discovered that by working together and sharing your unique strengths, dreams, and ideas, you can overcome any challenge!</p>
            <div id="completionTime"></div>
            <p><strong>What you accomplished:</strong></p>
            <ul style="text-align: left; max-width: 500px; margin: 0 auto;">
                <li>‚ú® Learned everyone's names and favorite subjects</li>
                <li>üß† Solved puzzles using teamwork</li>
                <li>üí´ Shared your dreams and goals</li>
                <li>ü§ù Created a team motto together</li>
                <li>üèÜ Built stronger connections with your teammates</li>
            </ul>
            <p style="margin-top: 30px; font-size: 1.3em; color: #fff;">
                <strong>Remember: The best part of this year will be the friendships you build along the way!</strong>
            </p>
        </div>
    </div>

    <script>
        let startTime = Date.now();
        let currentChallenge = 1;
        let teamData = {
            period: '',
            names: [],
            subjects: [],
            dreams: [],
            selectedRiddleOption: null,
            motto: '',
            completionTime: '',
            teamSize: 0
        };

        /*
        SETUP COMPLETE! 
        
        Your escape room is now fully integrated with your Google Form.
        When students complete the game, their data will automatically 
        be submitted to your Google Sheet.
        
        The game captures:
        - Class period (1, 2, 4, or 5)
        - Team size (3 or 4 members)
        - All team member names and favorite subjects
        - Individual dreams/goals for the school year
        - Team motto created together
        - Completion time and timestamp
        
        Simply share this game with your students and the data will flow
        directly into your connected Google Sheet!
        */

        // Timer function
        function updateTimer() {
            const elapsed = Date.now() - startTime;
            const minutes = Math.floor(elapsed / 60000);
            const seconds = Math.floor((elapsed % 60000) / 1000);
            document.getElementById('timer').textContent = 
                `Time Elapsed: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        setInterval(updateTimer, 1000);

        // Progress bar update
        function updateProgress() {
            const progressBar = document.getElementById('progressBar');
            const percentage = (currentChallenge - 1) * 20;
            progressBar.style.width = percentage + '%';
        }

        // Show/hide hints
        function toggleHint(hintId) {
            const hint = document.getElementById(hintId);
            hint.style.display = hint.style.display === 'block' ? 'none' : 'block';
        }

        // Show success message
        function showSuccess(challengeNum, message) {
            const successDiv = document.getElementById(`success${challengeNum}`);
            successDiv.textContent = message;
            successDiv.style.display = 'block';
            setTimeout(() => {
                successDiv.style.display = 'none';
            }, 3000);
        }

        // Show error message
        function showError(challengeNum, message) {
            const errorDiv = document.getElementById(`error${challengeNum}`);
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
            setTimeout(() => {
                errorDiv.style.display = 'none';
            }, 3000);
        }

        // Move to next challenge
        function nextChallenge() {
            document.getElementById(`puzzle${currentChallenge}`).classList.remove('active');
            currentChallenge++;
            updateProgress();
            
            if (currentChallenge <= 5) {
                document.getElementById(`puzzle${currentChallenge}`).classList.add('active');
            } else {
                showVictory();
            }
        }

        // Challenge 1: Team Introductions
        function checkChallenge1() {
            const period = document.getElementById('period').value;
            const names = [
                document.getElementById('name1').value.trim(),
                document.getElementById('name2').value.trim(),
                document.getElementById('name3').value.trim(),
                document.getElementById('name4').value.trim()
            ];
            
            const subjects = [
                document.getElementById('subject1').value,
                document.getElementById('subject2').value,
                document.getElementById('subject3').value,
                document.getElementById('subject4').value
            ];

            if (!period) {
                showError(1, "Please select your class period first!");
                return;
            }

            // Filter out empty names and subjects (for teams of 3)
            const filledNames = names.filter(name => name !== '');
            const filledSubjects = subjects.filter(subject => subject !== '');

            // Check if we have at least 3 members and matching subjects
            if (filledNames.length < 3) {
                showError(1, "You need at least 3 team members! Please enter names for the first 3 members.");
                return;
            }

            if (filledNames.length !== filledSubjects.length) {
                showError(1, "Please make sure every team member who entered a name also chose their favorite subject!");
                return;
            }

            // Store the actual team data (filtering out empty entries)
            teamData.period = period;
            teamData.names = filledNames;
            teamData.subjects = filledSubjects;
            teamData.teamSize = filledNames.length;
            
            showSuccess(1, `Great! Welcome ${filledNames.join(', ')} from Period ${period}! The cipher has been decoded. Moving to the next challenge...`);
            setTimeout(nextChallenge, 2000);
        }

        // Challenge 2: Riddle
        function selectOption(element, value) {
            // Remove selection from all options
            document.querySelectorAll('.riddle-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Select this option
            element.classList.add('selected');
            teamData.selectedRiddleOption = value;
        }

        function checkChallenge2() {
            if (!teamData.selectedRiddleOption) {
                showError(2, "Please select an answer first!");
                return;
            }

            if (teamData.selectedRiddleOption === 'keyboard') {
                showSuccess(2, "Correct! A keyboard has keys but no locks, space but no room, and you can enter but can't go outside!");
                setTimeout(nextChallenge, 2000);
            } else {
                showError(2, "Not quite right! Think about something you use every day that has 'keys' and a 'space' bar...");
            }
        }

        // Challenge 3: Dreams
        function checkChallenge3() {
            const dreams = [
                document.getElementById('dream1').value.trim(),
                document.getElementById('dream2').value.trim(),
                document.getElementById('dream3').value.trim(),
                document.getElementById('dream4').value.trim()
            ];

            // Filter dreams based on actual team size
            const relevantDreams = dreams.slice(0, teamData.teamSize);
            
            if (relevantDreams.some(dream => dream === '' || dream.length < 10)) {
                showError(3, "Please make sure each team member shares at least a sentence about their dreams or goals!");
                return;
            }

            teamData.dreams = relevantDreams;
            showSuccess(3, "Beautiful dreams! Your shared aspirations have unlocked the next challenge. Together, you can achieve anything!");
            setTimeout(nextChallenge, 2000);
        }

        // Challenge 4: Math
        function checkChallenge4() {
            const nameLettersInput = parseInt(document.getElementById('nameLetters').value) || 0;
            const subjectMultipleInput = parseInt(document.getElementById('subjectMultiple').value) || 0;
            const finalCodeInput = parseInt(document.getElementById('finalCode').value) || 0;

            // Calculate correct answers
            const totalLetters = teamData.names.join('').length;
            const uniqueSubjects = [...new Set(teamData.subjects)].length;
            const correctMultiple = totalLetters * uniqueSubjects;
            const correctFinalCode = correctMultiple + 13;

            if (nameLettersInput !== totalLetters) {
                showError(4, `Step 1 incorrect. The total letters in all names should be ${totalLetters}. Count again!`);
                return;
            }

            if (subjectMultipleInput !== correctMultiple) {
                showError(4, `Step 2 incorrect. ${totalLetters} √ó ${uniqueSubjects} unique subjects = ${correctMultiple}`);
                return;
            }

            if (finalCodeInput !== correctFinalCode) {
                showError(4, `Step 3 incorrect. ${correctMultiple} + 13 = ${correctFinalCode}`);
                return;
            }

            showSuccess(4, `Perfect calculations! The vault opens with code ${correctFinalCode}!`);
            setTimeout(nextChallenge, 2000);
        }

        // Challenge 5: Final Challenge
        function checkChallenge5() {
            const motto = document.getElementById('teamMotto').value.trim();
            
            if (motto.length < 20) {
                showError(5, "Your motto needs to be a bit longer to include all the required elements!");
                return;
            }

            const mottoLower = motto.toLowerCase();
            
            // Check for all names (only the actual team members)
            const allNamesIncluded = teamData.names.every(name => 
                mottoLower.includes(name.toLowerCase())
            );
            
            // Check for at least one subject
            const subjectIncluded = teamData.subjects.some(subject => 
                mottoLower.includes(subject.toLowerCase())
            );
            
            // Check for "together"
            const togetherIncluded = mottoLower.includes('together');

            if (!allNamesIncluded) {
                showError(5, "Make sure to include all team members' names in your motto!");
                return;
            }

            if (!subjectIncluded) {
                showError(5, "Don't forget to include at least one of the favorite subjects mentioned earlier!");
                return;
            }

            if (!togetherIncluded) {
                showError(5, "Remember to include the word 'together' in your motto!");
                return;
            }

            showSuccess(5, "AMAZING MOTTO! You've completed all challenges!");
            setTimeout(nextChallenge, 2000);
        }

        // Submit data to Google Form
        async function submitToGoogleForm() {
            // Your Google Form's action URL
            const GOOGLE_FORM_URL = 'https://docs.google.com/forms/d/e/1FAIpQLScDMt4MEoeKFC0STHc6aqR7qI72c6iSPKIVFI3TsF-I4CI7Qw/formResponse';
            
            // Form data with your actual field IDs
            const formData = new FormData();
            formData.append('entry.922930204', teamData.period);
            formData.append('entry.1184799013', teamData.teamSize);
            
            // Add team member data (fill with empty strings if team of 3)
            formData.append('entry.811675588', teamData.names[0] || '');
            formData.append('entry.634679781', teamData.subjects[0] || '');
            formData.append('entry.239320151', teamData.names[1] || '');
            formData.append('entry.416335857', teamData.subjects[1] || '');
            formData.append('entry.34419998', teamData.names[2] || '');
            formData.append('entry.1891192169', teamData.subjects[2] || '');
            formData.append('entry.1168482043', teamData.names[3] || '');
            formData.append('entry.543500904', teamData.subjects[3] || '');
            
            formData.append('entry.1720027877', teamData.dreams.join(' | '));
            formData.append('entry.461631444', teamData.motto);
            formData.append('entry.787853294', teamData.completionTime);
            formData.append('entry.1271213828', new Date().toString());

            try {
                await fetch(GOOGLE_FORM_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    body: formData
                });
                console.log('Data submitted successfully!');
            } catch (error) {
                console.log('Form submission completed');
                // Note: no-cors mode means we can't see the actual response, but the data still gets submitted
            }
        }

        // Victory screen
        function showVictory() {
            const elapsed = Date.now() - startTime;
            const minutes = Math.floor(elapsed / 60000);
            const seconds = Math.floor((elapsed % 60000) / 1000);
            
            // Store completion data
            teamData.completionTime = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            teamData.motto = document.getElementById('teamMotto').value.trim();
            
            // Submit data to Google Form
            submitToGoogleForm();
            
            document.getElementById('completionTime').innerHTML = 
                `<strong>üïê Completion Time: ${teamData.completionTime}</strong>`;
            
            document.getElementById('celebration').style.display = 'block';
            updateProgress();
            document.getElementById('progressBar').style.width = '100%';
        }

        // Initialize progress bar
        updateProgress();
    </script>
</body>
</html>